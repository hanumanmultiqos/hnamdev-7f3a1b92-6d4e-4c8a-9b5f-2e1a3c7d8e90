<div class="max-w-6xl mx-auto p-4">
  <div class="flex items-center justify-between mb-6 flex-wrap">
    <div class="flex gap-3 items-center flex-wrap">
      <div class="">
        <div class="">
          <input
            class="!bg-bgcolor px-4 py-2 bor border-[1px]"
            type="search"
            placeholder="Search Here..."
            [(ngModel)]="query.search"
            (ngModelChange)="applySearch($event)"
          />
        </div>
      </div>
    </div>
  </div>

  <div class="flex flex-col">
    <div class="overflow-x-auto border border-gray-200 sm:rounded-lg shadow-sm">
      <table
        class="min-w-full border border-gray-200 rounded-lg overflow-hidden"
      >
        <!-- HEADER -->
        <thead class="bg-gray-100 text-gray-700 text-sm uppercase">
          <tr>
            <th class="px-4 py-3 text-left">No</th>

            <th
              class="px-4 py-3 text-left cursor-pointer select-none"
              (click)="sort('title')"
              (keydown.enter)="sort('title')"
            >
              <div class="flex items-center gap-2">
                <span>Title</span>
              </div>
            </th>

            <th class="px-4 py-3 text-left">Description</th>
            <th class="px-4 py-3 text-left">Category</th>
            <th class="px-4 py-3 text-left">Created By</th>
            <th class="px-4 py-3 text-left">Created At</th>
            <th class="px-4 py-3 text-left">Status</th>
            @if(user() !== 'VIEWER' ){
            <th class="px-4 py-3 text-center w-56">Actions</th>
            }
          </tr>
        </thead>

        <!-- BODY -->
        <tbody>
          @if (list() && list().length > 0) { @for (data of list(); track data)
          {
          <tr class="hover:bg-gray-50 transition-colors duration-150">
            <td class="px-4 py-3">
              {{ (query.page - 1) * query.limit + ($index + 1) }}
            </td>

            <td class="px-4 py-3 capitalize">{{ data?.title || '-' }}</td>

            <td class="px-4 py-3 capitalize">{{ data?.description || '-' }}</td>

            <td class="px-4 py-3 capitalize">{{ data?.category || '-' }}</td>
            <td class="px-4 py-3 capitalize">
              {{ data?.createdBy?.username || '-' }}
            </td>
            <td class="px-4 py-3 capitalize">
              {{ (data?.createdBy?.createdAt ) || '-' }}
            </td>

            <td class="px-4 py-3 capitalize">{{ data?.status || '-' }}</td>
          </tr>
          } } @if (!list() || list().length === 0) {
          <tr>
            <td colspan="6" class="px-4 py-6 text-center text-gray-500">
              No Data Found
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
  @if(list().length > 0) {
  <app-custom-pagination
    (changeItem)="changeItemsPerPage($event)"
    (pageChanged)="pageChange($event)"
    [currentPage]="query.page"
    [perPage]="query.limit"
    [totalCount]="totalItem()"
  ></app-custom-pagination>
  }
</div>
